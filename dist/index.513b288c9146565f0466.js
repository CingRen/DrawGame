(()=>{function t(t){this.init(t),this.dataArr=[],this.judgeArr=[],this.timer=null}t.prototype.init=function(t){this.initData(t),this.render(),this.handler()},t.prototype.initData=function(t){this.el=t.el,this.level=t.level,this.blocks=Math.pow(2*this.level,2),this.dataArr=this.getRandomArr()},t.prototype.render=function(){for(var t=this.el.offsetWidth/(2*this.level)-4,e=this.el.offsetHeight/(2*this.level)-4,r=0;r<this.blocks;r++){var i=document.createElement("div");i.className="block",i.style.width=t+"px",i.style.height=e+"px",i.setAttribute("data-index",this.dataArr[r]);var s=document.createElement("img");s.className="pic",s.src="images/"+this.dataArr[r]+".png",i.appendChild(s),this.el.appendChild(i)}},t.prototype.getRandomArr=function(){for(var t=this.getPicsArr(),e=this.blocks/2,r=[],i=0;i<e;i++)r.push(t[i],t[i]);return this.shuffle(r)},t.prototype.getPicsArr=function(){for(var t=[],e=1;e<=20;e++)t.push(e);return this.shuffle(t)},t.prototype.shuffle=function(t){return t.sort((function(){return Math.random()-.5}))},t.prototype.handler=function(){var t=this;this.el.onclick=function(e){clearTimeout(t.timer),t.timer=setTimeout((function(){"block"==e.target.className&&(e.target.classList.add("on"),2==t.judgeArr.push(e.target)&&(t.judegArrFun(t.judgeArr)?(t.judgeArr[0].classList.add("done"),t.judgeArr[1].classList.add("done"),t.judgeArr=[]):setTimeout((function(){t.judgeArr[0].classList.remove("on"),t.judgeArr[1].classList.remove("on"),t.judgeArr=[]}),500)))}),300)}},t.prototype.judegArrFun=function(t){var e=t[0],r=t[1];return e.getAttribute("data-index")==r.getAttribute("data-index")};var e=new t({el:document.querySelector(".game"),level:2});console.log(e)})();